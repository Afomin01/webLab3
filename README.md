# webLab3
Web programming lab work made at ITMO University by Artem Bakin and Dmitry Kupershtein.

| Start page | Main page |
| ---------- | --------- |
|![Start page](https://user-images.githubusercontent.com/38016689/105333342-ab54d000-5be6-11eb-863d-9e104f823198.png)| ![Main page](https://user-images.githubusercontent.com/38016689/105333413-c0316380-5be6-11eb-93fd-02086f32c0d7.png)|

## Task
Develop a web application based on JavaServer Faces Framework that determines whether a point on a coordinate plane falls into a
given area. The application should contain start page with an interactive clocks and main page with the graph, inputs and results table. User can enter point's coordinates by using form input fields or by
clicking with a mouse on the graph. The radius of the figure can be set with **R** combobox.

This area has a variable radius R. When R is changed, all points that are drawn on graph change their position according to new R.

| Var | Type | Valid values      | Input         |
| --- | ---- | ----------------- | ------------- |
| X   |int   |[-3,5]             | commandButton |
| Y   |float |(-5,5)             | inputText     |
| R   |float |{1, 1.5, 2, 2.5, 3}| selectOneMenu |

According to task **X** must be represented as **commandButton**, so we decided to send check request when user clicks any of **X** buttons. 

All data must be stored in the **Oracle DB**.

## ER diagram
Pretty simple

![weblab3-er](https://user-images.githubusercontent.com/38016689/105578631-a765b100-5d92-11eb-833c-b1ecbcb444f4.png)

To identify the user, our application creates and uses a client_id cookie using a servlet filter. 

According to task, no registration or log in is required for this lab.

## AJAX
Although AJAX is not required by our lab task, we decided, that any check request (by clicking on the graph or buttons) must be sent by AJAX, so our site could provide a better user experience.

## Clicking on graph
We used SVG to draw the graph itself and **ui:repeat** tag to fill graph with user's previous points. The graph itself is inside form. 
Using jQuery we register **'mousedown'** event on graph form, and after that filled our two inputHidden with new X and Y values. After that, using JS we emulated click on commandButton, so form data with X and Y values was sent to server using AJAX request.

## Harmonograph
You can see strange blinking figures on the start page. They are generated by our digital-harmonograph [js version](https://github.com/Afomin01/webLab3/blob/master/src/main/webapp/resources/js/Harmonograph.js).

If you are interested in what is this, welcome to our [Java](https://github.com/Afomin01/Digital_Harmonograph) (legacy) and [C++](https://github.com/Afomin01/Harmonograph) harmonograph implementations.

## Server time
To fill the start page, we added server time, which is requested once by the HEAD http method. Time is represented using our own SVG based clocks.

## Denial of responsibility
Some of our technical solutions were dictated by the task, so we had no opportunity to improve them.
